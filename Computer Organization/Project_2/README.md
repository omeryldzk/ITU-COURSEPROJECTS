# Computer Organization Project 2 - Hardwired Control Unit

## Course Information
**Course**: BLG 222E - Computer Organization  
**Department**: Computer Engineering  
**University**: Istanbul Technical University  
**Semester**: Spring 2024  

## Project Details
**CRN**: 21334 - 21336  
**Lecturers**: Gökhan İnce, Mustafa Kamaşak  

## Group Members
- **Ömer Yıldız** (150200060)
- **Utku Kadir Somer** (150190052)

## Introduction
In this project, we designed a hardwired control unit for the architecture developed in Part 4 of Project 1. Our goal was to create a control unit capable of managing the execution of a set of instructions stored in memory, operating within a framework that divides these instructions into two categories: those with address references and those without. This design aims to ensure synchronous and efficient execution of operations within a computer system.

Our control unit interfaces with the modules developed in the previous project, managing inputs such as selection signals, function selections, and ALU inputs. By implementing a timing unit, we ensured that all components of our system function correctly and in harmony.

## Task Distributions
All the tasks, including fetching, decoding, writing the memory file, and designing and implementing the executions for instructions with and without address references, were done collaboratively. We worked as a team, ensuring collaborative effort and shared insights across all tasks.

## Materials and Methods

### Cycles
- **T0 (Fetch cycle 1)**: IR(7-0) ← M[PC], PC ← PC + 1
- **T1 (Fetch cycle 2)**: IR(15-8) ← M[PC], PC ← PC + 1
- **T2 (Decode cycle)**: D0...D33 ← IR(15-10), AR ← IR(7-0), REGSEL ← IR(9-8), DESTREG ← IR(8-6), SRCREG1 ← IR(5-3), SRCREG2 ← IR(2-0), S← IR(9)
- **D0 T3 (Load from PC)**: S1 ← PC
- **D0 T4**: S2 ← IR(7-0)
- **D0 T5**: PC ← S1 + S2
- **D1 T3 Z (Load from PC)**: S1 ← PC
- **D1 T4 Z**: S2 ← IR(7-0)
- **D1 T5 Z**: PC ← S1 + S2
- **D2 T3 Z’ (Load from PC)**: S1 ← PC
- **D2 T4 Z’**: S2 ← IR(7-0)
- **D2 T5 Z’**: PC ← S1 + S2
- **D3 T3**: Rx ← M[SP], SP ← SP + 1
- **D3 T4**: SP ← SP + 1
- **D4 T3**: M[SP] ← Rx, SP ← SP - 1
- **D4 T4**: SP ← SP - 1

For the next 7 cycles (D5 - D11), there are 4 possibilities:
- **SRC is RF, Dest is RF**
  - D5 T3: ALUOUT ← RF
  - D5 T4: RF ← ALUOUT
- **SRC is RF, Dest is ARF**
  - D5 T3: ALUOUT ← RF
  - D5 T4: ARF ← ALUOUT
- **SRC is ARF, Dest is RF**
  - D5 T3: S1 ← ARF
  - D5 T4: RF ← S1
- **SRC is ARF, Dest is ARF**
  - D5 T3: S1 ← ARF
  - D5 T4: ARF ← S1

For the D6 - D11 instructions, the logic is the same but the ALU FunSel values change according to the instruction. There are multiple possibilities for instructions between D12 - D16 and D21 - D29.

### General Layout
The overall layout of our hardwired control unit was designed to ensure efficient processing and execution of instructions. We organized the control signals systematically to manage the flow of data and control information throughout the system. This structured approach facilitated easier debugging and testing of individual components.

### Timing Unit
The timing unit is a fundamental component of our control unit design, ensuring that all operations within the system are executed in a precise and orderly manner. The timing unit is responsible for generating control signals at specific intervals to synchronize the fetching, decoding, and execution phases of the instruction cycle.

## Fetching and Decoding
The fetching phase involves retrieving the instruction from memory and loading it into the Instruction Register (IR) in two cycles. Once the instruction is fetched, the decoding phase begins, interpreting the opcode and other relevant fields to determine the specific operation to be performed.

## Results

### Execution of Instructions
- **Fetch Cycle**:
  - T0 (Fetch cycle 1): Successfully loaded the LSB of the instruction from memory to IR(7-0) and incremented the PC by 1.
  - T1 (Fetch cycle 2): Successfully loaded the MSB of the instruction from memory to IR(15-8) and incremented the PC by 1.
- **Decode and Execute Cycles**:
  - T2 (Decode cycle): Correctly decoded the opcode and other fields, setting up the appropriate control signals for execution.
  - Execution cycles (T3 and beyond): Correctly performed the operations specified by the instructions, such as data transfer, arithmetic, and logical operations.

### Timing and Synchronization
Our timing unit successfully synchronized the various components of the control unit, ensuring that each instruction was fetched, decoded, and executed in the correct sequence.

### Memory Access
For instructions involving memory access, such as LDR (load) and STR (store), our control unit correctly managed the memory addresses and data transfers.

### Control Signal Validation
Throughout the testing phase, we closely monitored the control signals generated by our control unit, ensuring they matched the expected values for each stage of the instruction cycle.

### Summary of Observations
- The control unit successfully managed the fetching, decoding, and execution of instructions, demonstrating the effectiveness of our design.
- The timing unit played a crucial role in maintaining synchronization, ensuring that all components operated harmoniously.
- Memory access operations were handled efficiently, with accurate control over data transfers.
- Control signals were validated and found to be correct, reinforcing the reliability of our design.

## Discussion
The design and implementation of our hardwired control unit posed several challenges, which we successfully addressed through collaborative effort. Ensuring precise synchronization across various stages of instruction execution was a primary challenge, which we managed effectively with our timing unit design.

## Conclusion
This project successfully demonstrated the design and implementation of a hardwired control unit capable of managing instruction execution efficiently and synchronously within a computer system. The collaborative effort and systematic approach ensured the successful completion of the project objectives.
